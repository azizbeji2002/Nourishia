{% extends 'test.html.twig' %}

{% block title %}Éditer Consultation{% endblock %}

{% block body %}
    <div class="container mt-5">
        <div class="card shadow-lg p-4 border-0 rounded">
            <h2 class="text-center">Éditer la Consultation - {{ consultation.id }}</h2>
            <hr class="mb-4">

            <div class="mt-4">
                <div class="p-4 bg-light rounded shadow-sm">
                    {{ form_start(form, {'attr': {'enctype': 'multipart/form-data'}}) }}
                    
                    <div class="mb-3">
                        <label for="dateConsultation" class="form-label">Date de Consultation</label>
                        {{ form_widget(form.date_consultation, {'attr': {'class': 'form-control', 'placeholder': 'Sélectionnez la date de consultation'}}) }}
                        {% for error in form.date_consultation.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        <label for="patient" class="form-label">Patient</label>
                        {{ form_widget(form.patient_id, {'attr': {'class': 'form-select'}}) }}
                        {% for error in form.patient_id.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        <label for="docteur" class="form-label">Docteur</label>
                        {{ form_widget(form.docteur_id, {'attr': {'class': 'form-select'}}) }}
                        {% for error in form.docteur_id.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <!-- Add new fields for editing -->
                    <div class="mb-3">
                        <label for="conseils" class="form-label">Conseils</label>
                        {{ form_widget(form.conseils, {'attr': {'class': 'form-control', 'placeholder': 'Entrez les conseils'}}) }}
                        {% for error in form.conseils.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        <label for="poids" class="form-label">Poids (kg)</label>
                        {{ form_widget(form.poids, {'attr': {'class': 'form-control', 'placeholder': 'Entrez le poids en kg'}}) }}
                        {% for error in form.poids.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        <label for="tension" class="form-label">Tension</label>
                        {{ form_widget(form.tension, {'attr': {'class': 'form-control', 'placeholder': 'Entrez la tension'}}) }}
                        {% for error in form.tension.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="mb-3">
                        <label for="process_grossesse" class="form-label">Processus de Grossesse</label>
                        {{ form_widget(form.process_grossesse, {'attr': {'class': 'form-control', 'placeholder': 'Sélectionnez la date du processus de grossesse'}}) }}
                        {% for error in form.process_grossesse.vars.errors %}
                            <div class="invalid-feedback">{{ error.message }}</div>
                        {% endfor %}
                    </div>

                    <div class="text-center">
                        <button type="submit" class="btn btn-primary btn-lg">✅ Mettre à jour</button>
                    </div>
                    {{ form_end(form) }}
                </div>
            </div>

            <div class="text-center mt-4">
                <a href="{{ path('app_consultation_index') }}" class="btn btn-outline-secondary btn-lg">
                    <i class="bi bi-arrow-left"></i>⬅️ Retour à la liste
                </a>
            </div>

            {{ include('consultation/_delete_form.html.twig') }}
        </div>
    </div>
{% endblock %}
