{% extends 'base1.html.twig' %}

{% block body %}
    <!-- Wrapper for centering the chart -->
    <div class="chart-container">
        <!-- Canvas for the Pie Chart with reduced size -->
        <canvas id="rolesChart"></canvas>
    </div>
    
    <!-- Include Chart.js before initializing the chart -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
    var ctx = document.getElementById('rolesChart').getContext('2d');
    var rolesChart = new Chart(ctx, {
        type: 'pie',
        data: {
            labels: ['Admin', 'Docteur', 'Femme Enceinte'],
            datasets: [{
                label: 'Nombre d\'utilisateurs par r√¥le',
                data: [
                    {{ rolesCount['Admin'] ?? 0 }},
                    {{ rolesCount['Docteur'] ?? 0 }},
                    {{ rolesCount['Femme Enceinte'] ?? 0 }}
                ],
                backgroundColor: [
                    '#6A4E9C',   
                    '#8B7B8B',   
                    '#D2A7D6'    
                ],
                hoverBackgroundColor: [
                    '#5B3E82',   
                    '#7A6D6D',   
                    '#B98CC6'    
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top',
                    labels: {
                        boxWidth: 15, 
                        padding: 8, 
                    }
                },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            return tooltipItem.label + ': ' + tooltipItem.raw;
                        }
                    }
                }
            },
            animation: {
                animateRotate: true,  
                animateScale: true,   
            }
        }
    });
    </script>

    <style>
        /* Style for centering the chart container */
        .chart-container {
            display: flex;
            justify-content: center;  /* Center horizontally */
            align-items: center;      /* Center vertically */
            height: 100vh;            /* Full viewport height */
            padding: 20px;            /* Padding around the chart */
        }

        /* Optional: Style the canvas to have a smooth border radius for aesthetics */
        #rolesChart {
            border-radius: 10px; /* Rounded corners for a modern look */
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2); /* Subtle shadow for depth */
            transition: transform 0.3s ease, box-shadow 0.3s ease; /* Smooth zoom-in effect on hover */
        }

        #rolesChart:hover {
            transform: scale(1.1); /* Slight zoom effect on hover */
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3); /* Slightly bigger shadow on hover for more emphasis */
        }
    </style>
{% endblock %}
